name: Publish and Purge CDN

on:
  release:
    types: [published] # runs when a GitHub Release is published
  workflow_dispatch:   # lets you run manually from GitHub Actions tab

jobs:
  purge-jsdelivr:
    runs-on: ubuntu-latest
    steps:
      - name: Purge jsDelivr cache
        run: |
          echo "Purging jsDelivr cache for pinglet-sse.js..."
          curl -s https://purge.jsdelivr.net/npm/@enjoys/pinglet@latest/pinglet-sse.js
