export const DEFAULT_IMAGE = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAARlAAAEZQAGA43XUAAARXklEQVR42u3dTVIjRxSF0V5VbcE58Njahoe1ptqKFoUhLGhFtwAbpPx59wzO2BE4VfoqeY/+8cfff/4AALL4IQCAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAG9Op7+2Kw0APvH2vSEA1vmi358dz84XTwDwDa/fJ8flO2YTAHN86berL3wHFYBeUfDy3dMEQP83/cMBBGASS94MrPi277ABMKOlbgW88QPA/UNgEwDf+/LfHSQAVg0BAfC1636DfQBUGBhsAsBbPwChg4IC4OMvf7/rB8CvBFIC4DLo58ofgIRfCWwCwJc/ACIgLwB8+QMgAjIDwJc/ALEREBkAvvwBYFwEmPYHgMAVwVF/5Mf/cAD4qZUOgMvQn//RAPC7rXIAuPoHgAn+UJCrfwAI/FWAqX8ACNwK8A/8AEDgVoC3fwAIvAXw9g8AgbcA3v4BIPAWwN4/AAT+XQDX/wAQ+GuA6tf/L//94xIi7XIjAQDvaZfvjGOG77AlA2Dw9f/5NOgfVwCgjksMnCv+GqDi9f/h0AJQ5E/Z7ysGwFHt9yUAxN8GlHmprfT7f1/+AFSLgPNSATDg9/9nBxOAon/ddlspANqp0K4kAAx8yW0rBcBu6A8AQ4Hz/oq7QgA0hxGAzgHQBMD4MnL9D0DlXwMcAsDwHwB5w4ACQAAAIAAEgAAAQAAIAAAQAAIAAASAAAAAASAAAEAACAAAEAACAAAEgAAAAAEgAABAAAgAAASAABAAAAgAASAAABAAAkAAACAABIAAAEAACAABAIAAEAACAAABIAAEAAACQAAIAAAEgAAAAAEgAABAAAgAABAAAgAABIAAAAABIAAAQAAIAAAQAAIAAASAAABAAAgAAQCAABAAAgAAASAABAAAAkAACAAABIAAEAAACAABIAAAEAACQAAAIAAEgAAAQAAIAAAQAAIAAASAAAAAASAAAEAACAAAEAACAAAEgAAAAAEgAOD/fQ7as83PAgSAABAAZD0cHvbBBQSAAHAImfPBsF+dU7cAIAAEgAAg4KGw9fjwAgJAAMBcD4Vb57/52YAAEAACgNqDf84qCAABIADwQHiz+xmBABAAAoDag383+TmBABAAAoCaa39DPsiAABAAMM/g33usBYIAEAACgIJrf24BQAAIAAGAt/+brAWCABAAAoCCa3/OLggAASAA8ACwFgg+/wJAABCz9mcgEASAABAAZA/+GQgEASAABAChg38GAkEACAABgLd/5xgEgADw4CT9Q28gEDwLBIAAoODan7MMAkAAeGjiA+8WADwPBIAAIGntz1ogCAABIAAIHvyzFggCQAAIAMLW/qwFggAQAAKA4ME/5xoEgADwoMSH3EAgeDYIAAFA0uDfzbNtIBAEgAAQAGS9/bsFAM8HASAACBn8sxYIAkAACACC1v6sBYIAEAACAG//1gJBAAgAAUDK2p9zDgJAAHgwEj74ZyAQPCsEgAAgaO3PWiAIAAEgABj4gX6amIFAEAACQABQfPDPWiAIAAEgAAha+3PmQQAIAA9DvP1bCwQBIAAEAClrf849CAAB4EFI6NqftUDw7BAAAoDAtT8DgSAABIAAIHzwz1ogCAABIAAIHfwzEAgCQAAIALz9+wyAABAADiIpg38GAkEACAABQNDa36f8fwUBIADg8/P5VJBbABAAAgCKrv1ZCwQBIAAEAMGDf9YCQQAIAIeQsLU/a4EgAASAACB58M9nAgSAAICstT8DgSAABIBDSPjgn7VAEAACALz9GwgEASAAIGXwz1ogCAABAEFrf24BQAAIAPD2by0QBIAAwAez+fL3GQEBIADwwUxmLRAEgADA2p+BQEAACAAM/hkIBASAAMDbv1sAQAAIALz9GwgEBIAAwNqfgUBAAAgArP25BQABIAAEANb+3AKA544AEAAY/DMQCAJAAAgADP5ZCwQBIAAEAAb//DsBIAAEgADA27+BQBAAAsADDIN/BgLBM0gACAAM/j2S8wQCQADgg2cgEBAAAgBv/9YCAQEgADD45xYAEAACAGt/1gJBAAgAAUCPD5u/9+/zBAJAAHhg+bBh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`

export const WidgetErrorTemplate = (message: string = "⚠️ Unable to load widget") => {
  return `(function () {
  const errorBox = document.createElement("div");
  errorBox.id = "pinglet-error-box";
  errorBox.className = "pinglet-error-box";
  errorBox.innerText ='${message}' ;
  Object.assign(errorBox.style, {
    position: "fixed",
    bottom: "20px",
    right: "20px",
    backgroundColor: "#fee2e2",           // light red
    color: "#991b1b",                     // dark red text
    padding: "12px 16px",
    border: "1px solid #fecaca",
    borderRadius: "8px",
    fontSize: "14px",
    fontWeight: "500",
    boxShadow: "0 2px 6px rgba(0,0,0,0.1)",
    zIndex: 9999,
    fontFamily: "sans-serif",
    maxWidth: "250px",
  });

  document.body.appendChild(errorBox);

  // Optional: auto-dismiss after 5 seconds
  setTimeout(() => {
    errorBox.remove();
  }, 5000);
})();
`
}
/**
 * DEFAULT_WIDGET_TEMPLATE
 *
 * This function returns a string that contains a widget template that can be
 * executed in the client's browser. The template is a self-contained widget that
 * displays a text message and an optional image. The widget is positioned at the
 * bottom right of the page and has a close button at the top right.
 *
 * The widget template accepts the following parameters:
 *
 * - `wid`: The unique identifier for the widget.
 * - `text`: The text message to be displayed in the widget.
 * - `description`: The description of the widget.
 * - `buttonText`: The text to be displayed in the button.
 * - `link`: The link URL of the button.
 * - `imagePreview`: The URL of the image to be displayed in the widget.
 *
 * The returned string is a self-executing anonymous function that creates the
 * widget and appends it to the page.
 *
 * @param {string} wid - The unique identifier for the widget.
 * @param {string} text - The text message to be displayed in the widget.
 * @param {string} description - The description of the widget.
 * @param {string} buttonText - The text to be displayed in the button.
 * @param {string} link - The link URL of the button.
 * @param {string} imagePreview - The URL of the image to be displayed in the widget.
 * @returns {string} A self-executing anonymous function that creates the widget and appends it to the page.
 */
export const DEFAULT_WIDGET_TEMPLATE = (wid: string, text: string, description: string, buttonText: string, link: string, imagePreview: string = DEFAULT_IMAGE) => {
  return `(function() {
      const widgetId = '${wid}';
      const widgetText = '${text}';
      const widgetDescription = '${description}';
      const widgetButtonText = '${buttonText}';
      const widgetLink = '${link}';
      const widgetImageUrl = '${imagePreview}';

      // Create widget
      const widget = document.createElement('div');
        
      widget.className = "pinglet-error-box";
      widget.id = 'text-widget-' + widgetId;
      widget.style.position = 'fixed';
      widget.style.bottom = '20px';
      widget.style.right = '20px';
      widget.style.width = '200px';
      widget.style.height = 'auto';
      widget.style.minHeight = '50px';
      widget.style.padding = '1.25rem';
      widget.style.border = '1px solid #e2e8f0';
      widget.style.borderRadius = '0.75rem';
      widget.style.backgroundColor = 'white';
      widget.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)';
      widget.style.overflow = 'auto';
      widget.style.zIndex = '9999';
      
      // Add close button
      const closeButton = document.createElement('button');
      closeButton.innerHTML = 'Ã—';
      closeButton.style.position = 'absolute';
      closeButton.style.top = '8px';
      closeButton.style.right = '8px';
      closeButton.style.width = '24px';
      closeButton.style.height = '24px';
      closeButton.style.border = 'none';
      closeButton.style.borderRadius = '50%';
      closeButton.style.backgroundColor = '#f3f4f6';
      closeButton.style.color = '#4b5563';
      closeButton.style.fontSize = '18px';
      closeButton.style.lineHeight = '1';
      closeButton.style.cursor = 'pointer';
      closeButton.style.display = 'flex';
      closeButton.style.alignItems = 'center';
      closeButton.style.justifyContent = 'center';
      closeButton.style.padding = '0';
      closeButton.style.transition = 'background-color 0.2s';
      
      closeButton.onmouseover = () => {
        closeButton.style.backgroundColor = '#e5e7eb';
      };
      
      closeButton.onmouseout = () => {
        closeButton.style.backgroundColor = '#f3f4f6';
      };
      
      closeButton.onclick = () => {
        widget.remove();
      };
      
      widget.appendChild(closeButton);
      
      // Create content container
      const content = document.createElement('div');
      content.style.display = 'flex';
      content.style.flexDirection = 'column';
      content.style.gap = '0.75rem';
      content.style.height = '100%';
      
      // Add image if URL exists
      if (widgetImageUrl) {
        const img = document.createElement('img');
        img.src = widgetImageUrl;
        img.style.width = '100%';
        img.style.height = '120px';
        img.style.objectFit = 'cover';
        img.style.borderRadius = '0.5rem';
        content.appendChild(img);
      }
      
      // Add text
        if (widgetText) {
        const text = document.createElement('p');
        text.textContent = widgetText;
        text.style.margin = '0';
        text.style.fontSize = '0.875rem';
        text.style.lineHeight = '1.5';
        text.style.color = '#4a5568';
        text.style.fontWeight = '500';
        content.appendChild(text);
        }
        
      if (widgetDescription) {
        const description = document.createElement('p');
        description.textContent = widgetDescription;
        description.style.margin = '0';
        description.style.fontSize = '0.75rem';
        description.style.lineHeight = '1.5';
        description.style.color = '#4a5568';
        content.appendChild(description);
      }
      
      // Add link if it exists
      if (widgetLink) {
        const link = document.createElement('a');
        link.href = widgetLink;
        link.innerHTML = widgetButtonText || 'Learn More';
        link.style.color = 'white';
        link.style.textDecoration = 'none';
        link.style.fontWeight = '500';
        link.style.fontSize = '0.75rem';
        link.style.padding = '0.375rem 0.75rem';
        link.style.backgroundColor = '#000000';
        link.style.borderRadius = '0.375rem';
        link.style.transition = 'all 0.2s ease';
        link.style.display = 'flex';
        link.style.alignItems = 'center';
        link.style.gap = '0.15rem';
        link.style.textAlign = 'left';
        link.style.width = 'fit-content';
        link.target = '_blank';
        
        link.onmouseover = () => {
          link.style.backgroundColor = '#333333';
          link.style.transform = 'translateY(-1px)';
        };
        
        link.onmouseout = () => {
          link.style.backgroundColor = '#000000';
          link.style.transform = 'translateY(0)';
        };
        
        content.appendChild(link);
      }
      
      widget.appendChild(content);      
      document.body.appendChild(widget);
    })();
  `
}
